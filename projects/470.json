{"device":"Hacks and Mods","url":"http:\/\/makeprojects.com\/Project\/Tweet-A-Watt+Power+Monitor\/470\/1","guide":{"author":{"text":"ladyada","userid":2689},"categories":["Hacks and Mods","Wireless"],"conclusion":"<p>This project first appeared in <a href=\"http:\/\/www.makezine.com\/18\">MAKE Volume 18<\/a>, page 112.<\/p>","difficulty":"Moderate","documents":[],"flags":[{"title":"From MAKE Magazine","flagid":"FROM_MAKE","text":"This project first appeared on the pages of MAKE magazine."}],"guideid":470,"image":{"imageid":7388,"text":"http:\/\/guide-images.makeprojects.org\/igi\/MvMcD3lGVHKLmwyW"},"introduction":"<p><em>By Limor Fried and Phillip Torrone<\/em><\/p>\n\n<p>We live in a rented apartment, so we don\u2019t have hacking access to a power meter or breaker panel. But we still wanted to measure our household power usage long-term, so we developed the Tweet-a-Watt. It uses plug-in electricity monitors at each outlet to wirelessly send readings to a base station, which assembles them into reports you can analyze and graph. It can also broadcast updates via Twitter.<\/p>\n\n<p>Building your own power monitor isn\u2019t too tough and can save money, but we\u2019re not fans of sticking our fingers into 120V wiring. Instead, we built on top of a P3 Kill A Watt power monitor, which we found at the local hardware store. To track usage room by room, for example \u201ckitchen,\u201d \u201cbedroom,\u201d \u201cworkbench,\u201d and \u201coffice,\u201d you can use a 6-outlet power strip in each room to feed all the room\u2019s devices through a shared monitor. Each Kill A Watt can measure up to 15 amps, or about 1,800 watts, which is plenty for any normal room.<\/p>\n\n<p>You can build each wireless outlet monitor for about $50 with a few easily available electronic parts and light soldering, and about the same for the receiver. No microcontroller programming or high voltage engineering is necessary!<\/p>","introduction_rendered":"<p><em>By Limor Fried and Phillip Torrone<\/em><\/p>\n\n<p>We live in a rented apartment, so we don\u2019t have hacking access to a power meter or breaker panel. But we still wanted to measure our household power usage long-term, so we developed the Tweet-a-Watt. It uses plug-in electricity monitors at each outlet to wirelessly send readings to a base station, which assembles them into reports you can analyze and graph. It can also broadcast updates via Twitter.<\/p>\n\n<p>Building your own power monitor isn\u2019t too tough and can save money, but we\u2019re not fans of sticking our fingers into 120V wiring. Instead, we built on top of a P3 Kill A Watt power monitor, which we found at the local hardware store. To track usage room by room, for example \u201ckitchen,\u201d \u201cbedroom,\u201d \u201cworkbench,\u201d and \u201coffice,\u201d you can use a 6-outlet power strip in each room to feed all the room\u2019s devices through a shared monitor. Each Kill A Watt can measure up to 15 amps, or about 1,800 watts, which is plenty for any normal room.<\/p>\n\n<p>You can build each wireless outlet monitor for about $50 with a few easily available electronic parts and light soldering, and about the same for the receiver. No microcontroller programming or high voltage engineering is necessary!<\/p><div class=\"parts\"><strong>Relevant parts<\/strong><ul><li><a href=\"http:\/\/make.dozuki.com\/Item\/Kill_A_Watt\">Kill A Watt<\/a><\/li><li><a href=\"http:\/\/make.dozuki.com\/Item\/XBEE_module\">XBEE module<\/a><\/li><li><a href=\"http:\/\/make.dozuki.com\/Item\/XBEE_adapter_kit\">XBEE adapter kit<\/a><\/li><li><a href=\"http:\/\/www.radioshack.com\/product\/index.jsp?productId=2994580&amp;amp;filterName=Brand&amp;amp;filterValue=RadioShack\">Resistor<\/a><\/li><li><a href=\"http:\/\/make.dozuki.com\/Item\/Capacitor\">Capacitor<\/a><\/li><li><a href=\"http:\/\/www.radioshack.com\/product\/index.jsp?productId=2036270\">Diode<\/a><\/li><li><a href=\"http:\/\/www.radioshack.com\/family\/index.jsp?categoryId=2032298\">LED<\/a><\/li><li><a href=\"http:\/\/www.radioshack.com\/product\/index.jsp?productId=2104090\">Heat Shrink tubing<\/a><\/li><li><a href=\"http:\/\/make.dozuki.com\/Item\/Ribbon_cable\">Ribbon cable<\/a><\/li><li><a href=\"http:\/\/make.dozuki.com\/Item\/Double-sided_foam_tape\">Double-sided foam tape<\/a><\/li><li><a href=\"http:\/\/make.dozuki.com\/Item\/FTDI_cable\">FTDI cable<\/a><\/li><li><a href=\"http:\/\/make.dozuki.com\/Item\/Access_to_Windows-based_computer\">Access to Windows-based computer<\/a><\/li><\/ul><\/div><div class=\"tools\"><strong>Tools<\/strong><ul><li><a href=\"http:\/\/www.radioshack.com\/product\/index.jsp?productId=2062745\">Desoldering tool<\/a><\/li><li><a href=\"http:\/\/make.dozuki.com\/Item\/Dremel_rotary_tool\">Dremel rotary tool<\/a><\/li><li><a href=\"http:\/\/make.dozuki.com\/Item\/Flush_diagonal_cutters\">Flush diagonal cutters<\/a><\/li><li><a href=\"http:\/\/www.ifixit.com\/Tools\/Heat-Gun\/IF145-031\">Heat gun or hair dryer<\/a><\/li><li><a href=\"http:\/\/www.radioshack.com\/product\/index.jsp?productId=3928375\">Helping Hands tool<\/a><\/li><li><a href=\"http:\/\/make.dozuki.com\/Item\/Small_screwdriver\">Small screwdriver<\/a><\/li><li><a href=\"http:\/\/www.radioshack.com\/product\/index.jsp?productId=2062719\">Solder<\/a><\/li><li><a href=\"http:\/\/www.radioshack.com\/product\/index.jsp?productId=3086619\">Soldering iron<\/a><\/li><\/ul><\/div>","locale":"en","parts":[{"text":"Kill A Watt","notes":"about $25 from a hardware store","url":"http:\/\/make.dozuki.com\/Item\/Kill_A_Watt","thumbnail":""},{"text":"XBEE module","notes":"XB24-ACI-001,about $20 from the Maker Shed (www.makershed.com), Adafruit (www.adafruit.com),Digi-Key,or Mouser","url":"http:\/\/make.dozuki.com\/Item\/XBEE_module","thumbnail":""},{"text":"XBEE adapter kit","notes":"$10 from Adafruit, or you can use another breakout\/ carrier board with a regulated 3.3V power supply and status LEDs","url":"http:\/\/make.dozuki.com\/Item\/XBEE_adapter_kit","thumbnail":""},{"text":"Resistor","notes":"1\/4W, 5%:4.7k\u03a9 (2), 10k\u03a9 (2)","url":"http:\/\/www.radioshack.com\/product\/index.jsp?productId=2994580&amp;filterName=Brand&amp;filterValue=RadioShack","thumbnail":""},{"text":"Capacitor","notes":"220\u00b5F, 4V or higher. Try to get 5mm diameter (1). 10,000\u00b5F (&quot;supercap&quot;), 6.3V. Try to get the 16mm diameter (1).","url":"http:\/\/make.dozuki.com\/Item\/Capacitor","thumbnail":""},{"text":"Diode","notes":"Purchase at Digi-Key or Mouser","url":"http:\/\/www.radioshack.com\/product\/index.jsp?productId=2036270","thumbnail":""},{"text":"LED","notes":"Large diffused LED for easy viewing","url":"http:\/\/www.radioshack.com\/family\/index.jsp?categoryId=2032298","thumbnail":""},{"text":"Heat Shrink tubing","notes":"1\/16&quot; and 1\/8&quot; diameter","url":"http:\/\/www.radioshack.com\/product\/index.jsp?productId=2104090","thumbnail":""},{"text":"Ribbon cable","notes":"About 32&quot; length. Rainbow coloring makes it easier, or use flexible wire","url":"http:\/\/make.dozuki.com\/Item\/Ribbon_cable","thumbnail":""},{"text":"Double-sided foam tape","notes":"or you can use hot glue","url":"http:\/\/make.dozuki.com\/Item\/Double-sided_foam_tape","thumbnail":""},{"text":"FTDI cable","notes":"3.3V or 5V cable,$20 from Adafruit, connects XBee 6-pin serial adapter to computer USB","url":"http:\/\/make.dozuki.com\/Item\/FTDI_cable","thumbnail":""},{"text":"Access to Windows-based computer","notes":"for updating XBee Firmware. You can run the Tweet-a-Watt code on any sort of computer; you only need a Windows machine to build it.","url":"http:\/\/make.dozuki.com\/Item\/Access_to_Windows-based_computer","thumbnail":""}],"prereqs":[],"steps":[{"title":"PREPARE THE WIRELESS MODULES","lines":[{"text":"Assemble one of the XBee adapter kits into an XBee breakout board, following the included instructions.","text_raw":"Assemble one of the XBee adapter kits into an XBee breakout board, following the included instructions.","bullet":"black","level":0},{"text":"Plug an XBee module onto the XBee breakout board and connect it to your computer via the FTDI cable. Plug the cable into the 6 XBee pins running from GND (ground) to CTS (flow control), marked by a strip of metal flashing.","text_raw":"Plug an XBee module onto the XBee breakout board and connect it to your computer via the FTDI cable. Plug the cable into the 6 XBee pins running from GND (ground) to CTS (flow control), marked by a strip of metal flashing.","bullet":"black","level":0},{"text":"Identify which serial port (COM) the cable is connected to. Under Windows, open the Device Manager and check how the port is listed. Ours was COM4.","text_raw":"Identify which serial port (COM) the cable is connected to. Under Windows, open the Device Manager and check how the port is listed. Ours was COM4.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7390,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/TFIQCW46sCUSFEHc"}],"number":1},{"title":"","lines":[{"text":"Download and install X-CTU software, which you can find by searching for \u201cX-CTU\u201d at <a href=\"http:\/\/www.digi.com\" rel=\"nofollow\">digi.com<\/a>. Launch the software, which configures and tests the XBee\u2019s radio.","text_raw":"Download and install X-CTU software, which you can find by searching for \u201cX-CTU\u201d at [http:\/\/www.digi.com|digi.com]. Launch the software, which configures and tests the XBee\u2019s radio.","bullet":"black","level":0},{"text":"In X-CTU, under the PC Settings tab, select the port you identified in the previous step and set the connection properties to 9,600bps, 8 bit, no parity, 1 stop bit, no flow control (or 96008N1). Click the <em>Test\/Query<\/em> button. A pop-up window should tell you that the communication was OK.","text_raw":"In X-CTU, under the PC Settings tab, select the port you identified in the previous step and set the connection properties to 9,600bps, 8 bit, no parity, 1 stop bit, no flow control (or 96008N1). Click the ''Test\/Query'' button. A pop-up window should tell you that the communication was OK.","bullet":"black","level":0},{"text":"Under the Modem Configuration tab, click the <em>Read<\/em> button to read in the current version and settings of the firmware. Download the latest version by clicking the <em>Download New Versions<\/em> button and selecting Web. Then select the last version in the <em>Version<\/em> dropdown on the right, and click the <em>Write<\/em> button to upload it to the XBee. Check the <em>Always Update Firmware<\/em> checkbox to keep things up-to-date.","text_raw":"Under the Modem Configuration tab, click the ''Read'' button to read in the current version and settings of the firmware. Download the latest version by clicking the ''Download New Versions'' button and selecting Web. Then select the last version in the ''Version'' dropdown on the right, and click the ''Write'' button to upload it to the XBee. Check the ''Always Update Firmware'' checkbox to keep things up-to-date.","bullet":"black","level":0},{"text":"Unplug the XBee module and repeat the upgrade for your other modules. You can hot-swap if you\u2019re careful: unplug the adapter from the cable first, gently swap modules, and plug in the adapter again. Then run <em>Test\/Query<\/em>, <em>Read<\/em>, and <em>Write<\/em> from X-CTU.","text_raw":"Unplug the XBee module and repeat the upgrade for your other modules. You can hot-swap if you\u2019re careful: unplug the adapter from the cable first, gently swap modules, and plug in the adapter again. Then run ''Test\/Query'', ''Read'', and ''Write'' from X-CTU.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7496,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/gEFWdfwhpngH1oNU"}],"number":2},{"title":"","lines":[{"text":"Now we\u2019ll configure the monitor modules to send the data we want and sleep between transmissions. For each XBee module (except for one), plug it back into the cable, run X-CTU, and under Modem Configuration click Read to load the settings. Configure the modules as follows, scrolling down as needed to click and enter parameters in place:","text_raw":"Now we\u2019ll configure the monitor modules to send the data we want and sleep between transmissions. For each XBee module (except for one), plug it back into the cable, run X-CTU, and under Modem Configuration click Read to load the settings. Configure the modules as follows, scrolling down as needed to click and enter parameters in place:","bullet":"black","level":0},{"text":"1. Set the <em>MY<\/em> address (the identifier for the XBee) to 1, then increment for each additional transmitter to tell them apart.","text_raw":"1. Set the ''MY'' address (the identifier for the XBee) to 1, then increment for each additional transmitter to tell them apart.","bullet":"blue","level":0},{"text":"2. Set the <em>Sleep Mode SM<\/em> to 4 (cyclic).","text_raw":"2. Set the ''Sleep Mode SM'' to 4 (cyclic).","bullet":"blue","level":0},{"text":"3. Set the <em>Sleep Time ST<\/em> to 3 (3 milliseconds after wake-up, go back to sleep).","text_raw":"3. Set the ''Sleep Time ST'' to 3 (3 milliseconds after wake-up, go back to sleep).","bullet":"blue","level":0},{"text":"4. Set the <em>Sleep Period SP<\/em> to C8 (0xC8 in hexadecimal = 200 = 2 seconds between transmits).","text_raw":"4. Set the ''Sleep Period SP'' to C8 (0xC8 in hexadecimal = 200 = 2 seconds between transmits).","bullet":"blue","level":0}],"object":null,"images":[{"imageid":7399,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/2QDunZGc1dTIHmlJ"}],"number":3},{"title":"","lines":[{"text":"5. Set <em>ADC 4 D4<\/em> to 2 (enable analog-digital converter D4).","text_raw":"5. Set ''ADC 4 D4'' to 2 (enable analog-digital converter D4).","bullet":"blue","level":0},{"text":"6. Set <em>ADC 0 D0<\/em> to 2 (enable analog-digital converter D0).","text_raw":"6. Set ''ADC 0 D0'' to 2 (enable analog-digital converter D0).","bullet":"blue","level":0},{"text":"7. Set <em>Samples<\/em> to TX IT to 13 (0x13 = 19 samples).","text_raw":"7. Set ''Samples'' to TX IT to 13 (0x13 = 19 samples).","bullet":"blue","level":0},{"text":"8. Set <em>Sample Rate IR<\/em> to 1 (1ms between samples).","text_raw":"8. Set ''Sample Rate IR'' to 1 (1ms between samples).","bullet":"blue","level":0},{"text":"Basically this means we\u2019ll have a single PAN network, each XBee will have a unique identifier, they\u2019ll stay in sleep mode most of the time, and they\u2019ll wake up every 2 seconds to take 19 samples from ADC 0 and 4, 1ms apart.","text_raw":"Basically this means we\u2019ll have a single PAN network, each XBee will have a unique identifier, they\u2019ll stay in sleep mode most of the time, and they\u2019ll wake up every 2 seconds to take 19 samples from ADC 0 and 4, 1ms apart.","bullet":"black","level":0},{"text":"Click the <em>Write<\/em> button to upload the new settings. You should see the green activity (RSSI) LED blink every 2 seconds, indicating wake-up. Note that once the XBee is told to go into sleep mode, it won\u2019t communicate with X-CTU until you reset it by unplugging it from the FTDI cable. Repeat Steps 1h\u20131i for the other transmitter modules. Then label the XBees, using a Sharpie, stickers, or similar, so you can tell which ones are transmitters and which one is the receiver.","text_raw":"Click the ''Write'' button to upload the new settings. You should see the green activity (RSSI) LED blink every 2 seconds, indicating wake-up. Note that once the XBee is told to go into sleep mode, it won\u2019t communicate with X-CTU until you reset it by unplugging it from the FTDI cable. Repeat Steps 1h\u20131i for the other transmitter modules. Then label the XBees, using a Sharpie, stickers, or similar, so you can tell which ones are transmitters and which one is the receiver.","bullet":"black","level":0}],"object":null,"images":[],"number":4},{"title":"ASSEMBLE THE TRANSMITTER BOARDS","lines":[{"text":"For wiring, refer to the schematic diagram at <a href=\"http:\/\/makezine.com\/18\/tweetawatt\">makezine.com\/18\/tweetawatt<\/a>.","text_raw":"For wiring, refer to the schematic diagram at [http:\/\/makezine.com\/18\/tweetawatt|makezine.com\/18\/tweetawatt].","bullet":"black","level":0},{"text":"The unassembled XBee adapter kit(s) are for the transmitter modules. With each board, solder in the power supply components (labeled C1, C2, and IC1 on the schematic), the sockets, and the LED marked ASC.","text_raw":"The unassembled XBee adapter kit(s) are for the transmitter modules. With each board, solder in the power supply components (labeled C1, C2, and IC1 on the schematic), the sockets, and the LED marked ASC.","bullet":"black","level":0},{"text":"Don\u2019t install IC2, R1, R3, or the RSSI LED. Don\u2019t clip the legs of the ASC LED, so that it will extend out to fit through the Kill A Watt case, and you can optionally replace it with a brighter LED.","text_raw":"Don\u2019t install IC2, R1, R3, or the RSSI LED. Don\u2019t clip the legs of the ASC LED, so that it will extend out to fit through the Kill A Watt case, and you can optionally replace it with a brighter LED.","bullet":"icon_note","level":1},{"text":"Follow the schematic to solder in the two 10K resistors R4 and R6 from the XBee\u2019s AD0 and AD4 (analog ins) to ground. Since we\u2019re not installing the voltage level shifter IC2, just run the resistors to the closest grounds, the pads for IC2 pins 10 and 13. These resistors form a voltage divider that reduces the Kill A Watt\u2019s 5V signal down to 3.3V for the XBee.","text_raw":"Follow the schematic to solder in the two 10K resistors R4 and R6 from the XBee\u2019s AD0 and AD4 (analog ins) to ground. Since we\u2019re not installing the voltage level shifter IC2, just run the resistors to the closest grounds, the pads for IC2 pins 10 and 13. These resistors form a voltage divider that reduces the Kill A Watt\u2019s 5V signal down to 3.3V for the XBee.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7476,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/ngJeYhiVmLWMsWB1"}],"number":5},{"title":"","lines":[{"text":"Cut and peel a 6&quot;, 4-wire length of ribbon cable. Solder 2 adjacent strands to the 4.7K resistors, reinforcing with heatshrink tubing. These wires will carry the current and voltage readings from the Kill A Watt. Clip the other ends of the 4.7K resistors short and solder them to piggyback on top of the 10K resistors on the analog-in side.","text_raw":"Cut and peel a 6\", 4-wire length of ribbon cable. Solder 2 adjacent strands to the 4.7K resistors, reinforcing with heatshrink tubing. These wires will carry the current and voltage readings from the Kill A Watt. Clip the other ends of the 4.7K resistors short and solder them to piggyback on top of the 10K resistors on the analog-in side.","bullet":"black","level":0},{"text":"Solder the 2 other wires from the ribbon to +5V and GND on the breakout pin contacts at the bottom of the board.","text_raw":"Solder the 2 other wires from the ribbon to +5V and GND on the breakout pin contacts at the bottom of the board.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7478,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/c32Nx3d5TObPi1wU"},{"imageid":7479,"orderby":2,"text":"http:\/\/guide-images.makeprojects.org\/igi\/1ylvKmSLhchWN1TX"}],"number":6},{"title":"","lines":[{"text":"Solder in the reset capacitor, C3, between the XBee\u2019s reset pin (RST) and the nearest ground (the pad for IC2, pin 4). The long lead side (+) connects to reset. Give it some lead length so you can bend the cylinder down to tuck it next to the 3.3V regulator (IC1). This cap trickle-charges on the reset line so that the XBee waits a few seconds to start up. This prevents the XBee from drawing too much current from the Kill A Watt.","text_raw":"Solder in the reset capacitor, C3, between the XBee\u2019s reset pin (RST) and the nearest ground (the pad for IC2, pin 4). The long lead side (+) connects to reset. Give it some lead length so you can bend the cylinder down to tuck it next to the 3.3V regulator (IC1). This cap trickle-charges on the reset line so that the XBee waits a few seconds to start up. This prevents the XBee from drawing too much current from the Kill A Watt.","bullet":"black","level":0},{"text":"At the other end of the 4-wire ribbon, solder the +5V and GND wires to the positive (+) and striped negative (\u2013) terminals of the enormous capacitor C4. This capacitor continuously vampires power from the Kill A Watt, then dumps it to the XBee every few seconds when the radio transmits.","text_raw":"At the other end of the 4-wire ribbon, solder the +5V and GND wires to the positive (+) and striped negative (\u2013) terminals of the enormous capacitor C4. This capacitor continuously vampires power from the Kill A Watt, then dumps it to the XBee every few seconds when the radio transmits.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7480,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/gCAeMUhswELVSORV"},{"imageid":7481,"orderby":2,"text":"http:\/\/guide-images.makeprojects.org\/igi\/SvQy2vHBA3XUYx5K"}],"number":7},{"title":"","lines":[{"text":"Trim the legs of the supercap and solder its anode (+) leg to diode D3\u2019s striped cathode (\u2013) end. This diode makes doubly sure that the capacitor won\u2019t be drained by the Kill A Watt.","text_raw":"Trim the legs of the supercap and solder its anode (+) leg to diode D3\u2019s striped cathode (\u2013) end. This diode makes doubly sure that the capacitor won\u2019t be drained by the Kill A Watt.","bullet":"black","level":0},{"text":"Solder 2 more wires to the ends of the supercap\u2019s legs, black to \u2013 and white or red to +. Then heat-shrink over the whole diode and the exposed capacitor leads.","text_raw":"Solder 2 more wires to the ends of the supercap\u2019s legs, black to \u2013 and white or red to +. Then heat-shrink over the whole diode and the exposed capacitor leads.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7483,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/6hDcLRuSJFHEbjR6"},{"imageid":7484,"orderby":2,"text":"http:\/\/guide-images.makeprojects.org\/igi\/Q4lASphtMkYfUAnI"}],"number":8},{"title":"ASSEMBLE THE SENSOR\/TRANSMITTER","lines":[{"text":"Now, the fun part \u2014 we\u2019ll fillet, stuff, and reassemble the Kill A Watt!","text_raw":"Now, the fun part \u2014 we\u2019ll fillet, stuff, and reassemble the Kill A Watt!","bullet":"black","level":0},{"text":"Open the Kill A Watt by removing the 3 screws. Be careful not to damage the ribbon cable holding the sides together!","text_raw":"Open the Kill A Watt by removing the 3 screws. Be careful not to damage the ribbon cable holding the sides together!","bullet":"black","level":0},{"text":"NOTE : If your Kill A Watt looks a little different from this photo, that\u2019s OK. The innards are the same. You may just need longer wires to place the supercap.","text_raw":"NOTE : If your Kill A Watt looks a little different from this photo, that\u2019s OK. The innards are the same. You may just need longer wires to place the supercap.","bullet":"icon_note","level":0},{"text":"Now it\u2019s time to jack into the sensor output! Melt a bit of solder to \u201ctin\u201d the ends of your power, ground, and sensor wires from the XBee board, then tin pins 1, 4, 11, and 14 of the LM2902 op-amp chip inside the Kill A Watt. Connect power to pin 4, ground to pin 11, analog in AD0 to pin 14, and AD4 to pin 1.","text_raw":"Now it\u2019s time to jack into the sensor output! Melt a bit of solder to \u201ctin\u201d the ends of your power, ground, and sensor wires from the XBee board, then tin pins 1, 4, 11, and 14 of the LM2902 op-amp chip inside the Kill A Watt. Connect power to pin 4, ground to pin 11, analog in AD0 to pin 14, and AD4 to pin 1.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7485,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/ONMl5lJMtepKKdkR"},{"imageid":7486,"orderby":2,"text":"http:\/\/guide-images.makeprojects.org\/igi\/EpaYWOKaw3Ylv2dq"}],"number":9},{"title":"","lines":[{"text":"Plug a configured XBee module into the adapter board, put some foam sticky tape or hot glue on the back, and fit it into the Kill A Watt case. Also find a place for the supercap, using tape or glue if needed. They should fit with no problem.","text_raw":"Plug a configured XBee module into the adapter board, put some foam sticky tape or hot glue on the back, and fit it into the Kill A Watt case. Also find a place for the supercap, using tape or glue if needed. They should fit with no problem.","bullet":"black","level":0},{"text":"Find a good place in the Kill A Watt case for the activity indicator (RSSI) LED, and drill a hole to fit. This lets you see when the XBee is transmitting.","text_raw":"Find a good place in the Kill A Watt case for the activity indicator (RSSI) LED, and drill a hole to fit. This lets you see when the XBee is transmitting.","bullet":"black","level":0},{"text":"Close it up and plug it in. You\u2019ll notice it\u2019s a bit finicky for a few seconds as the big capacitor charges up, but after about 15 seconds you should see the display stabilize and the red LED blink every 2 seconds.","text_raw":"Close it up and plug it in. You\u2019ll notice it\u2019s a bit finicky for a few seconds as the big capacitor charges up, but after about 15 seconds you should see the display stabilize and the red LED blink every 2 seconds.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7489,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/AyTYZINDa2amtexu"},{"imageid":7490,"orderby":2,"text":"http:\/\/guide-images.makeprojects.org\/igi\/yslfvsSPKmEMdvIR"}],"number":10},{"title":"PREPARE THE BASE STATION","lines":[{"text":"Go back to your computer and plug the receiver XBee into the USB adapter. You should see its RSSI LED light up whenever the transmitters send data. That means you have a good link!","text_raw":"Go back to your computer and plug the receiver XBee into the USB adapter. You should see its RSSI LED light up whenever the transmitters send data. That means you have a good link!","bullet":"black","level":0},{"text":"Run X-CTU and open the Terminal tab. You\u2019ll see a lot of junk, but what\u2019s important is that a new chunk is added every 2 seconds. The hardware is done. Good work!","text_raw":"Run X-CTU and open the Terminal tab. You\u2019ll see a lot of junk, but what\u2019s important is that a new chunk is added every 2 seconds. The hardware is done. Good work!","bullet":"black","level":0}],"object":null,"images":[{"imageid":7494,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/DkxGESijbRNuBmuI"}],"number":11},{"title":"INSTALL AND CONFIGURE THE SOFTWARE","lines":[{"text":"If you don\u2019t already have Python, download and install it from <a href=\"http:\/\/python.org\/download\" rel=\"nofollow\">python.org\/download<\/a>. We built Tweet-a-Watt using version 2.5, so that\u2019s the safest. We installed it into the directory (file folder) C:\\python25.","text_raw":"If you don\u2019t already have Python, download and install it from [http:\/\/python.org\/download|python.org\/download]. We built Tweet-a-Watt using version 2.5, so that\u2019s the safest. We installed it into the directory (file folder) C:\\python25.","bullet":"black","level":0},{"text":"Download and unzip the Tweet-a-Watt code bundle from <a href=\"http:\/\/makezine.com\/18\/tweetawatt\">makezine.com\/18\/tweetawatt<\/a> into a new project directory, C:\\wattcher. This includes the wattcher.py Python script. Download 3 additional libraries linked from the same page, and put them into this project directory: <em>win32file<\/em>, so Python can write out the power data log file; <em>pyserial<\/em>, so it can communicate with the XBee through the serial port; and <em>simplejson<\/em>, to call the Twitter API.","text_raw":"Download and unzip the Tweet-a-Watt code bundle from [http:\/\/makezine.com\/18\/tweetawatt|makezine.com\/18\/tweetawatt] into a new project directory, C:\\wattcher. This includes the wattcher.py Python script. Download 3 additional libraries linked from the same page, and put them into this project directory: ''win32file'', so Python can write out the power data log file; ''pyserial'', so it can communicate with the XBee through the serial port; and ''simplejson'', to call the Twitter API.","bullet":"black","level":0},{"text":"Open wattcher.py in a text editor and change the <strong>SERIALPORT<\/strong> = line near the top (line 24) to specify your serial port, from Step 1c.","text_raw":"Open wattcher.py in a text editor and change the '''SERIALPORT''' = line near the top (line 24) to specify your serial port, from Step 1c.","bullet":"black","level":0}],"object":null,"images":[],"number":12},{"title":"","lines":[{"text":"Make sure one of your sensor\/transmitter units (Kill A Watt + XBee) is plugged in and blinking every 2 seconds, and that the receiver XBee\u2019s RSSI LED is also blinking. Nothing should be plugged into the Kill A Watt yet, and its LCD should be clear, not fuzzy.","text_raw":"Make sure one of your sensor\/transmitter units (Kill A Watt + XBee) is plugged in and blinking every 2 seconds, and that the receiver XBee\u2019s RSSI LED is also blinking. Nothing should be plugged into the Kill A Watt yet, and its LCD should be clear, not fuzzy.","bullet":"black","level":0},{"text":"Open a Terminal window (<strong>Run cmd<\/strong>), navigate to the project directory (cd c:\\wattcher), and run Python on the wattcher.py script (C:\\python25\\python.exe wattcher.py). You should see a steady stream of data listing current, wattage, and watt-hours since the previous reading. Hooray! We have wireless data!","text_raw":"Open a Terminal window ('''Run cmd'''), navigate to the project directory (cd c:\\wattcher), and run Python on the wattcher.py script (C:\\python25\\python.exe wattcher.py). You should see a steady stream of data listing current, wattage, and watt-hours since the previous reading. Hooray! We have wireless data!","bullet":"black","level":0},{"text":"The output of the script probably says that power is being used, so we need to calibrate the sensor in the code so that it knows where zero is. Type Ctrl-C to quit the script, then run it again with the debug flag -d (C:\\python25\\python.exe wattcher.py -d). In the output, look for lines that start with ampdata and note the number that follows. Quit the script, open wattcher.py in an editor again, and change the <strong>VREF<\/strong> calibration number listed for the sensor to this number.","text_raw":"The output of the script probably says that power is being used, so we need to calibrate the sensor in the code so that it knows where zero is. Type Ctrl-C to quit the script, then run it again with the debug flag -d (C:\\python25\\python.exe wattcher.py -d). In the output, look for lines that start with ampdata and note the number that follows. Quit the script, open wattcher.py in an editor again, and change the '''VREF''' calibration number listed for the sensor to this number.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7510,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/dbOIFh5Dj6Rrddio"}],"number":13},{"title":"","lines":[{"text":"Repeat Steps 5d\u20135f to test and calibrate your other sensor\/transmitters one at a time.","text_raw":"Repeat Steps 5d\u20135f to test and calibrate your other sensor\/transmitters one at a time.","bullet":"black","level":0},{"text":"Run the code, and watch the watts! A nice way to test is by sticking the meter on a dimmable switch and seeing how the dimmer affects the numbers.","text_raw":"Run the code, and watch the watts! A nice way to test is by sticking the meter on a dimmable switch and seeing how the dimmer affects the numbers.","bullet":"black","level":0},{"text":"Finally, let\u2019s configure the Tweet-a-Watt to tweet. If you don\u2019t already have a Twitter account, sign up at <a href=\"http:\/\/twitter.com\/signup\" rel=\"nofollow\">http:\/\/twitter.com\/signup<\/a>. Then edit wattcher.py again, and change the 2 lines defining <strong>twitterusername<\/strong> and <strong>twitterpassword<\/strong> to specify your username and password. Then run the script as usual, and it will send a Current Usage tweet every 8 hours, at midnight, 8 a.m., and 4 p.m.","text_raw":"Finally, let\u2019s configure the Tweet-a-Watt to tweet. If you don\u2019t already have a Twitter account, sign up at http:\/\/twitter.com\/signup. Then edit wattcher.py again, and change the 2 lines defining '''twitterusername''' and '''twitterpassword''' to specify your username and password. Then run the script as usual, and it will send a Current Usage tweet every 8 hours, at midnight, 8 a.m., and 4 p.m.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7512,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/WZK6KSjqKKNU1ATE"}],"number":14},{"title":"USE IT","lines":[{"text":"<strong>Graphing Data:<\/strong> An extra feature built into the Python script is code that graphically displays 2 hours of energy usage coming in from one of the sensors. To run this, install into the project directory the free graphing modules wxPython (<a href=\"http:\/\/wxpython.org\" rel=\"nofollow\">wxpython.org<\/a>), matplotlib (<a href=\"http:\/\/matplotlib.sourceforge.net\" rel=\"nofollow\">matplotlib.sourceforge.net<\/a>), and NumPy and PyLab (both from <a href=\"http:\/\/scipy.org\" rel=\"nofollow\">scipy.org<\/a>). Then edit wattcher.py to set <strong>GRAPHIT = True<\/strong>.","text_raw":"'''Graphing Data:''' An extra feature built into the Python script is code that graphically displays 2 hours of energy usage coming in from one of the sensors. To run this, install into the project directory the free graphing modules wxPython ([http:\/\/wxpython.org|wxpython.org]), matplotlib ([http:\/\/matplotlib.sourceforge.net|matplotlib.sourceforge.net]), and NumPy and PyLab (both from [http:\/\/scipy.org|scipy.org]). Then edit wattcher.py to set '''GRAPHIT = True'''.","bullet":"black","level":0},{"text":"<strong>Base Station Variations:<\/strong> Because the web\/Twitter app uses Google authentication, we can feed data into it from a computer. A great enhancement would be to program an Arduino so that it could update the app\u2019s database, either by getting it to simulate a computer or by using another authentication scheme. The Arduino would let the base station be small and portable, drive outputs such as displays through simple direct circuitry, and work all the time on batteries without having to be booted up \u2014 all without requiring a big computer.","text_raw":"'''Base Station Variations:''' Because the web\/Twitter app uses Google authentication, we can feed data into it from a computer. A great enhancement would be to program an Arduino so that it could update the app\u2019s database, either by getting it to simulate a computer or by using another authentication scheme. The Arduino would let the base station be small and portable, drive outputs such as displays through simple direct circuitry, and work all the time on batteries without having to be booted up \u2014 all without requiring a big computer.","bullet":"black","level":0},{"text":"<strong>Phil's Story:<\/strong> Limor and I live at the same address, and after we developed the Tweet-a-Watt, she would look at the power graphs it created each morning. She saw these huge spikes every 2\u20133 hours at night, so she asked me what was going on. I needed to admit that I have a hard time sleeping, and those spikes were when I went to the other room (my office) and turned on my giant 30&quot; monitor. This project now gives away some of my sleep problems \u2014 if I could fix those, I\u2019d likely consume less power.","text_raw":"'''Phil's Story:''' Limor and I live at the same address, and after we developed the Tweet-a-Watt, she would look at the power graphs it created each morning. She saw these huge spikes every 2\u20133 hours at night, so she asked me what was going on. I needed to admit that I have a hard time sleeping, and those spikes were when I went to the other room (my office) and turned on my giant 30\" monitor. This project now gives away some of my sleep problems \u2014 if I could fix those, I\u2019d likely consume less power.","bullet":"black","level":0}],"object":null,"images":[{"imageid":7796,"orderby":1,"text":"http:\/\/guide-images.makeprojects.org\/igi\/UhRMF14USglTyJOy"}],"number":15},{"title":"RESOURCES","lines":[{"text":"Tweet-a-Watt GAE web app: <a href=\"http:\/\/wattcher.appspot.com\" rel=\"nofollow\">wattcher.appspot.com<\/a>","text_raw":"Tweet-a-Watt GAE web app: [http:\/\/wattcher.appspot.com|wattcher.appspot.com]","bullet":"black","level":0},{"text":"Limor\u2019s original Tweet-a-Watt tutorial: <a href=\"http:\/\/ladyada.net\/make\/tweetawatt\" rel=\"nofollow\">ladyada.net\/make\/tweetawatt<\/a>","text_raw":"Limor\u2019s original Tweet-a-Watt tutorial: [http:\/\/ladyada.net\/make\/tweetawatt|ladyada.net\/make\/tweetawatt]","bullet":"black","level":0},{"text":"Tweet-a-Watt Twitter account: <a href=\"http:\/\/twitter.com\/tweetawatt\" rel=\"nofollow\">twitter.com\/tweetawatt<\/a>","text_raw":"Tweet-a-Watt Twitter account: [http:\/\/twitter.com\/tweetawatt|twitter.com\/tweetawatt]","bullet":"black","level":0}],"object":null,"images":[],"number":16}],"subject":"","summary":"Transmit power usage data to a base station computer, with the option to broadcast updates via Twitter.","time_required":"Weekend","title":"Tweet-A-Watt Power Monitor","tools":[{"text":"Desoldering tool","notes":"","url":"http:\/\/www.radioshack.com\/product\/index.jsp?productId=2062745","thumbnail":""},{"text":"Dremel rotary tool","notes":"or a small drill","url":"http:\/\/make.dozuki.com\/Item\/Dremel_rotary_tool","thumbnail":""},{"text":"Flush diagonal cutters","notes":"","url":"http:\/\/make.dozuki.com\/Item\/Flush_diagonal_cutters","thumbnail":""},{"text":"Heat gun or hair dryer","notes":"","url":"http:\/\/www.ifixit.com\/Tools\/Heat-Gun\/IF145-031","thumbnail":""},{"text":"Helping Hands tool","notes":"makes things go much faster","url":"http:\/\/www.radioshack.com\/product\/index.jsp?productId=3928375","thumbnail":""},{"text":"Small screwdriver","notes":"to open Kill-A-Watt case","url":"http:\/\/make.dozuki.com\/Item\/Small_screwdriver","thumbnail":""},{"text":"Solder","notes":"","url":"http:\/\/www.radioshack.com\/product\/index.jsp?productId=2062719","thumbnail":""},{"text":"Soldering iron","notes":"preferably with temperature control, stand, and conical or small flat tip","url":"http:\/\/www.radioshack.com\/product\/index.jsp?productId=3086619","thumbnail":""}],"type":"project"},"guideid":"470"}